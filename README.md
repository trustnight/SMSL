# 灵魂面甲服务器启动器 (Soul Mask Server Launcher)

> **🤖 重要声明：本项目由纯AI生成，仓库主不会代码**
> 
> 此项目完全由人工智能助手编写和维护，仓库所有者本人不具备编程能力。
> 如有技术问题或需要修改，请通过AI助手为您解决。

一个专为《灵魂面甲》(Soul Mask) 游戏设计的图形化服务器管理工具，提供服务器启动、配置管理、自动备份、SteamCMD集成、RCON远程控制等全方位功能。

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![PySide6](https://img.shields.io/badge/PySide6-6.5.0+-green.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)
![Platform](https://img.shields.io/badge/Platform-Windows-lightgrey.svg)

## 📋 目录

- [功能特性](#-功能特性)
- [系统要求](#-系统要求)
- [安装指南](#-安装指南)
- [使用说明](#-使用说明)
- [项目结构](#-项目结构)
- [配置说明](#-配置说明)
- [常见问题](#-常见问题)
- [开发指南](#-开发指南)
- [更新日志](#-更新日志)
- [许可证](#-许可证)

## 🚀 功能特性

### 🎮 服务器管理
- **一键启动/停止/重启** - 简单易用的服务器控制
- **实时状态监控** - 监控服务器运行状态和资源使用
- **服务器日志实时显示** - 查看服务器运行日志和错误信息
- **MOD加载检测** - 自动检测和显示已加载的MOD
- **服务器启动完成检测** - 智能检测服务器是否完全启动

### 🎛️ RCON远程控制
- **RCON连接管理** - 远程连接服务器进行管理
- **玩家管理** - 查看在线玩家数量和信息
- **服务器命令执行** - 通过RCON执行服务器命令
- **实时玩家数量显示** - 动态显示当前在线玩家数

### 📦 SteamCMD集成
- **自动下载安装SteamCMD** - 无需手动配置SteamCMD
- **一键安装/更新游戏服务器** - 自动化游戏服务器安装和更新
- **游戏文件完整性验证** - 确保服务器文件完整性
- **多源下载支持** - 支持多个下载源提高下载速度

### 💾 智能备份系统
- **手动备份创建** - 随时创建服务器数据备份
- **自动定时备份** - 可配置的自动备份功能
- **备份文件管理** - 查看、恢复、删除备份文件
- **压缩备份** - 使用ZIP压缩节省存储空间
- **旧备份自动清理** - 自动删除过期备份文件
- **备份前安全检查** - 确保服务器状态安全后再备份

### 📋 日志系统
- **实时日志显示** - 实时查看服务器和启动器日志
- **日志级别过滤** - 按级别筛选日志信息
- **关键词搜索** - 快速搜索特定日志内容
- **日志文件保存** - 自动保存日志到文件
- **日志统计信息** - 显示日志统计和分析

### ⚙️ 配置管理
- **图形化配置界面** - 直观的配置管理界面
- **服务器参数配置** - 端口、玩家数、游戏模式等设置
- **路径管理** - 服务器路径、备份路径等配置
- **配置文件自动保存** - 自动保存和加载配置
- **默认配置恢复** - 一键恢复默认设置

## 💻 系统要求

- **操作系统**: Windows 10/11 (64位)
- **Python版本**: Python 3.8 或更高版本
- **内存**: 至少 4GB RAM
- **存储空间**: 至少 10GB 可用空间
- **网络**: 稳定的互联网连接（用于SteamCMD下载）

## 📥 安装指南

### 方法一：源码运行（推荐开发者）

1. **克隆或下载项目**
   ```bash
   git clone <repository-url>
   cd Soul
   ```

2. **安装Python依赖**
   ```bash
   pip install -r requirements.txt
   ```

3. **运行程序**
   ```bash
   python gui_main.py
   ```

### 方法二：打包为可执行文件

1. **安装PyInstaller**
   ```bash
   pip install pyinstaller
   ```

2. **打包程序**
   ```bash
   pyinstaller soul_launcher.spec
   ```

3. **运行可执行文件**
   - 在 `dist` 目录中找到生成的可执行文件
   - 双击运行即可

## 📖 使用说明

### 首次使用

1. **启动程序** - 运行 `gui_main.py` 或可执行文件
2. **配置路径** - 在"路径配置"选项卡中设置服务器路径和SteamCMD路径
3. **安装服务器** - 在"SteamCMD"选项卡中下载并安装游戏服务器
4. **配置服务器** - 在"服务器参数"选项卡中设置服务器参数
5. **启动服务器** - 在"启动管理"选项卡中启动服务器

### 主要功能使用

#### 🎮 启动管理
- 点击"启动服务器"按钮启动服务器
- 实时查看服务器状态和日志
- 使用"停止服务器"或"重启服务器"控制服务器

#### 📦 SteamCMD管理
- 首次使用需要下载SteamCMD
- 使用"安装/更新服务器"功能获取最新服务器文件
- 定期验证文件完整性

#### 💾 备份管理
- 手动创建备份：点击"创建备份"按钮
- 启用自动备份：设置备份间隔时间
- 恢复备份：选择备份文件并点击"恢复备份"
- 管理备份：查看、删除不需要的备份文件

#### 🎛️ RCON控制
- 配置RCON连接信息
- 连接到服务器进行远程管理
- 执行服务器命令
- 查看玩家信息

## 📁 项目结构

```
Soul/
├── gui_main.py                 # 主程序入口
├── requirements.txt             # Python依赖包
├── soul_launcher.spec          # PyInstaller打包配置
├── README.md                   # 项目说明文档
├── configs/                    # 配置文件目录
│   └── server_config.json     # 服务器配置文件
├── logs/                       # 日志文件目录
│   └── launcher.log           # 启动器日志
├── backups/                    # 备份文件目录
└── src/                        # 源代码目录
    ├── common/                 # 公共模块
    │   ├── constants.py        # 常量定义
    │   ├── utils.py           # 工具函数
    │   └── styles.css         # 样式文件
    ├── managers/               # 管理器模块
    │   ├── backup_manager.py   # 备份管理器
    │   ├── launch_manager.py   # 启动管理器
    │   ├── log_manager.py      # 日志管理器
    │   ├── paths_manager.py    # 路径管理器
    │   ├── rcon_manager.py     # RCON管理器
    │   ├── server_manager.py   # 服务器管理器
    │   ├── server_params_manager.py # 服务器参数管理器
    │   └── steamcmd_manager.py # SteamCMD管理器
    └── tabs/                   # 界面选项卡
        ├── backup_tab.py       # 备份管理选项卡
        ├── launch_tab.py       # 启动管理选项卡
        ├── paths_tab.py        # 路径配置选项卡
        ├── rcon_tab.py         # RCON控制选项卡
        ├── server_params_tab.py # 服务器参数选项卡
        └── steamcmd_tab.py     # SteamCMD管理选项卡
```

## ⚙️ 配置说明

### 服务器配置文件 (server_config.json)

```json
{
  "server_name": "灵魂面甲服务器",      // 服务器名称
  "max_players": 20,                    // 最大玩家数
  "port": 7777,                         // 服务器端口
  "multihome": "0.0.0.0",              // 绑定IP地址
  "game_mode": "pve",                   // 游戏模式
  "auto_backup": true,                  // 自动备份开关
  "backup_interval": 30,                // 备份间隔(分钟)
  "rcon_enabled": true,                 // RCON功能开关
  "rcon_addr": "127.0.0.1",            // RCON地址
  "rcon_port": 25575,                   // RCON端口
  "rcon_password": "admin",             // RCON密码
  "extra_args": "-pve -mod=\"...\"",     // 额外启动参数
  "steamcmd_path": "...",               // SteamCMD路径
  "server_path": "...",                 // 服务器路径
  "backup_dir": "...",                  // 备份目录
  "log_file_path": "..."                // 日志文件路径
}
```

### 常用启动参数

- `-pve` - PvE模式
- `-pvp` - PvP模式
- `-gamedistindex=4` - 游戏分发索引
- `-mod="MOD_ID1,MOD_ID2"` - 加载指定MOD
- `-port=7777` - 指定端口
- `-maxplayers=20` - 最大玩家数

## ❓ 常见问题

### Q: 服务器启动失败怎么办？
A: 
1. 检查服务器路径是否正确
2. 确认端口没有被占用
3. 查看日志文件中的错误信息
4. 确保有足够的系统权限

### Q: SteamCMD下载失败？
A:
1. 检查网络连接
2. 尝试使用VPN
3. 检查防火墙设置
4. 确保有足够的磁盘空间

### Q: 备份功能不工作？
A:
1. 检查备份目录权限
2. 确保有足够的磁盘空间
3. 检查服务器路径设置
4. 查看日志中的错误信息

### Q: RCON连接失败？
A:
1. 确认服务器已启动
2. 检查RCON配置信息
3. 确认防火墙设置
4. 检查服务器RCON功能是否启用

## 🛠️ 开发指南

### 代码结构

项目采用模块化设计，主要分为以下几个部分：

- **管理器模块** (`managers/`) - 负责各种功能的业务逻辑
- **界面模块** (`tabs/`) - 负责用户界面和交互
- **公共模块** (`common/`) - 提供通用工具和常量

### 添加新功能

1. 在 `managers/` 中创建新的管理器类
2. 在 `tabs/` 中创建对应的界面选项卡
3. 在 `gui_main.py` 中集成新功能
4. 更新配置文件和常量定义

### 代码规范

- 使用UTF-8编码
- 遵循PEP 8代码规范
- 添加详细的中文注释
- 使用有意义的变量和函数名

## 📝 更新日志

### V0.1 (当前版本)
- ✅ 基础服务器管理功能
- ✅ SteamCMD集成
- ✅ 备份系统
- ✅ RCON远程控制
- ✅ 日志管理
- ✅ 图形化配置界面
- ✅ MOD加载检测
- ✅ 自动备份功能

### 计划功能
- 🔄 多服务器管理
- 🔄 插件系统
- 🔄 Web管理界面
- 🔄 数据库集成
- 🔄 性能监控

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🤝 贡献

欢迎提交问题报告和功能请求！如果您想为项目做出贡献，请：

1. Fork 本项目
2. 创建您的功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交您的更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开一个 Pull Request

## 📞 支持

如果您在使用过程中遇到问题，可以通过以下方式获取帮助：

- 查看本文档的常见问题部分
- 提交 Issue 报告问题
- 查看项目日志文件获取详细错误信息

---

**感谢使用灵魂面甲服务器启动器！** 🎮

*让服务器管理变得简单高效！*
